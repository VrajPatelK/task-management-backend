-- USERS
CREATE TABLE USERS
(
    id SERIAL,
    email VARCHAR(255) UNIQUE NOT NULL,
    username VARCHAR(255) NOT NULL,
    password VARCHAR(255) NOT NULL,
    user_type VARCHAR(255) CHECK (user_type = 'admin' or user_type = 'developer') NOT NULL,
    profile_img VARCHAR(255) DEFAULT 'https://firebasestorage.googleapis.com/v0/b/task-management-fbb64.appspot.com/o/profile_images%2Fdefault-profile-img.png?alt=media&token=dbab22ee-13fe-4b80-b7a5-7209944a775a',

    PRIMARY KEY(id)
)

-- TASKS
CREATE TABLE TASKS
(
    id SERIAL,
    title VARCHAR(255) NOT NULL,
    description VARCHAR(255) NOT NULL,
    status VARCHAR(255) CHECK(status = 'pending' or status = 'in-progress' or status = 'completed') DEFAULT 'pending',
    created_at timestamp DEFAULT CURRENT_TIMESTAMP,
    deadline timestamp DEFAULT (CURRENT_TIMESTAMP + INTERVAL '7 days'),
    created_by INT NOT NULL,
    assigned_to INT NOT NULL,

    PRIMARY KEY(id),
    FOREIGN KEY(created_by) REFERENCES USERS(id) ON DELETE CASCADE ON UPDATE CASCADE,
    FOREIGN KEY(assigned_to) REFERENCES USERS(id) ON DELETE CASCADE ON UPDATE CASCADE
)
